"use strict";angular.module(regdep("snackbars"),[]).factory("snackbars",["$rootScope","$compile","$document","$timeout",function($rootScope,$compile,$document,$timeout){function kick(){isWorking||next()}function next(){return isWorking=!0,isStopped?void 0:(hide(),$timeout.cancel(hidePromise),messages.length?void $timeout(switchMessage(messages.shift())):void(isWorking=!1))}function switchMessage(nextMsg){function changeMessageAndShow(){$scope.msg=nextMsg,show()}return function(){var netxMsgTime=parseInt(nextMsg.time,10),fullShowTime=(netxMsgTime||3e3)+switchTime;return $timeout(changeMessageAndShow,switchTime/2),messages.length?void(hidePromise=$timeout(next,netxMsgTime?fullShowTime:1e3+switchTime)):(hidePromise=$timeout(hide,fullShowTime),void(isWorking=!1))}}function show(){$scope.hidden=!1}function hide(){$scope.hidden=!0}function stop(){isStopped=!0,$timeout.cancel(hidePromise)}var switchTime=600,messages=[],$scope=$rootScope.$new(),hidePromise=null,isWorking=!1,isStopped=!1;return function(){var $body=angular.element($document[0].body),$elem=$compile('<div class="snackbar_wrapper"><div class="snackbar" ng-mouseover="stop()" ng-mouseleave="start()" ng-class="{hide: hidden, show: !hidden}"><div class="msg" ng-bind="msg.text | translate"></div><button class="action flat"ng-bind="msg.action.button | translate"ng-click="msg.action.fn()"ng-if="msg.action"></button></div></div>')($scope);$body.append($elem)}(),hide(),$scope.stop=stop,$scope.start=function(){isStopped=!1,$timeout(next,1e3)},{add:function(text,time,action){messages.push({text:text,time:time,action:action}),kick()},createAction:function(fn,button){return function(fn,button){return _.isFunction(fn)&&_.isString(button)}(fn,button)?{fn:fn,button:button}:null}}}]);