"use strict";!function(){var checkPing=angular.module(regdep("check-ping"),[]);checkPing.service("checkPing",["$rootScope",function(){return{check:function(){return new Promise(function(resolve,reject){var proto="https:"==document.location.protocol?"wss":"ws",connection=new WebSocket(proto+"://"+document.location.host+"/websocket");connection.onopen=function(){var send="init "+Math.round(4294967294*Math.random()+1);connection.send(send),connection.send('sysutils:{ "method": "ping", "params": { "host": "google.com", "-c": "3", "-s": "56", "-W": "3" } }')},connection.onmessage=function(e){var data=e.data;if("sysutils:"==data.substring(0,9)){var _load=data.replace("sysutils:",""),input=JSON.parse(_load);if((!input||input.error)&&(connection.close(),reject()),input.result){if(input.result.message){var mess=input.result.message;mess.includes("packet loss")?mess.includes("0% packet loss")?resolve():reject():mess.includes("bad address")&&reject()}input.result.end&&connection.close()}}},connection.onerror=function(){connection.close(),reject()}})}}}])}();