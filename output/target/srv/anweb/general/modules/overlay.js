"use strict";!function(){var overlayModule=angular.module(regdep("overlay"),[]);overlayModule.service("overlay-core",["overlay-simple","overlay-progress","overlay-not-available",function(simple,progress,notAvailable){return{simple:simple,progress:progress,notAvailable:notAvailable}}]),overlayModule.service("overlay-helper",["$document",function($document){function blockFunction($event){return $event.preventDefault(),$event.stopPropagation(),$event.stopImmediatePropagation(),!1}function isActivate(){return stackAction.length>0}function hasAction(action){return _.contains(stackAction,action)}function blockMainPage(action){isActivate()||($mainPage.bind(keyEvents,blockFunction),$document.bind(scrollEvents,blockFunction),$rootHtmlElement.addClass("disable_scroll")),hasAction(action)||($dialogPage=angular.element($body[0].querySelector(".ngdialog")),$dialogPage&&($dialogPage.bind(keyEvents,blockFunction),dialogsBlock[action]=dialogsBlock[action]||[],dialogsBlock[action]=dialogsBlock[action].concat($dialogPage)),stackAction.push(action))}function unblockMainPage(action){stackAction=_.without(stackAction,action),isActivate()||($mainPage.unbind(keyEvents,blockFunction),$document.unbind(scrollEvents,blockFunction),$rootHtmlElement.removeClass("disable_scroll")),dialogsBlock[action]&&(_.each(dialogsBlock[action],function(dialog){dialog.unbind(keyEvents,blockFunction)}),delete dialogsBlock[action])}var $rootHtmlElement=angular.element($document[0].documentElement),$body=angular.element($document[0].body),$mainPage=angular.element($body.children()[0]),$dialogPage=null,keyEvents="keydown keyup keypress",scrollEvents="touchmove",stackAction=[],dialogsBlock={};return{blockMainPage:blockMainPage,unblockMainPage:unblockMainPage}}]),overlayModule.service("overlay-simple",["$rootScope","$compile","$document","overlay-helper",function($rootScope,$compile,$document,helper){function start(params){stackEvents.push(params.event),helper.blockMainPage("overlay-simple")}function stop(params){params.force?stackEvents.length=0:stackEvents=_.without(stackEvents,params.event),0==stackEvents.length&&helper.unblockMainPage("overlay-simple")}var elemScope=$rootScope.$new();elemScope.dots=_.range(8);var stackEvents=[];elemScope.overlayIsHidden=function(){return!stackEvents.length||$rootScope.overlayIsHidden},elemScope.getOverlayClass=function(){return elemScope.overlayIsHidden()?"overlay-simple--hide":"overlay-simple--show"};var $body=angular.element($document[0].body),$elem=$compile('<div class="overlay-simple" ng-class="getOverlayClass()"><nw-progress-circular ng-if="!overlayIsHidden()"></nw-progress-circular></div>')(elemScope);return $body.append($elem),{start:start,stop:stop}}]),overlayModule.service("overlay-progress",["$rootScope","$compile","$document","$timeout","translate","overlay-helper",function($rootScope,$compile,$document,$timeout,translate,helper){function stop(){elemScope.isShow=!1,elemScope.step=null,helper.unblockMainPage("overlay-progress")}var $body=angular.element($document[0].body),elemScope=$rootScope.$new();elemScope.isShow=!1,elemScope.step=null,elemScope.getOverlayClass=function(){return elemScope.isShow?"overlay-progress--show":"overlay-progress--hide"};var $elem=$compile('<div class="overlay-progress" ng-class="getOverlayClass()"><div class="overlay-progress__content"><div class="overlay-progress__logo"></div><div class="overlay-title" ng-if="title.length > 1" ng-bind="title | translate"></div> <nw-auto-progress-bar ng-if="isShow" pb-duration="step.duration" pb-callback="step.callback(status)" pb-pause="step.pause" pb-start-position="step.startPosition"></nw-auto-progress-bar></div></div>')(elemScope);return $body.append($elem),{start:function(params){params.duration&&(elemScope.isShow=!0,elemScope.step={duration:params.duration,callback:function(status){"finished"==status&&stop(),params.callback&&params.callback(status)},pause:params.pause||!1,startPosition:params.startPosition||null},elemScope.title=params.title?params.title:"",helper.blockMainPage("overlay-progress"))},stop:stop}}]),overlayModule.service("overlay-not-available",["$rootScope","$compile","$document","translate","overlay-helper",function($rootScope,$compile,$document,translate,helper){function setStates(mode,count){elemScope.box=function(mode,count){switch(mode){case"basic":switch(count){case 0:return"none";case 1:return"first";case 2:return"second";default:return"main"}case"static":return"static";case"icon":return"show";default:return"none"}}(mode,count),elemScope.textBox=function(mode,count){switch(mode){case"basic":return count>2?"show":"hide";case"static":return"show";default:return"hide"}}(mode,count),elemScope.iconBox="show",elemScope.iconState=function(mode,count){return"basic"==mode?_.isNumber(count)&&3>count?"warning":"error":"warning"}(mode,count)}function clearStates(){elemScope.box="none",elemScope.textBox="hide",elemScope.iconBox="hide",elemScope.iconState||(elemScope.iconState="warning")}var prefix=autoconf.BR2_PACKAGE_ANWEB_SWITCH?"-sw":"",elemScope=$rootScope.$new();clearStates(),elemScope.getOverlayClass=function(){return"overlay-not-available--"+elemScope.box},elemScope.getOverlayTextBoxClass=function(){return"overlay-not-available-text--"+elemScope.textBox},elemScope.getOverlayIconBoxClass=function(){return"overlay-not-available-icon--"+elemScope.iconBox},elemScope.showIcon=function(name){return elemScope.iconState===name},elemScope.getTextBoxAttention=function(){return translate("static"==elemScope.box?"msg_device_is_not_available_attention_static":"msg_device_is_not_available_attention")};var $body=angular.element($document[0].body),$elem=$compile('<div class="overlay-not-available" ng-class="getOverlayClass()"><div class="overlay-not-available-text" ng-class="getOverlayTextBoxClass()"><div class="overlay-not-available-text__title-container"><svg svg-icon="warning_circle" class="overlay-not-available-text__title-icon"></svg><div class="overlay-not-available-text__title-text" ng-bind="\'msg_device_is_not_available_title\' | translate"></div></div><div class="overlay-not-available-text__subtitle" ng-bind="\'msg_device_is_not_available_subtitle\' | translate"> </div><ul class="overlay-not-available-text__reason" ><li ng-bind="\'msg_device_is_not_available_reason_lan\' | translate"></li><li ng-hide="autoconf.BR2_PACKAGE_ANWEB_SWITCH" ng-bind="\'msg_device_is_not_available_reason_wifi\' | translate"></li></ul><div class="overlay-not-available-text__attention" ng-bind="getTextBoxAttention()"> </div></div></div><div class="overlay-not-available-icon overlay-not-available-icon-'+prefix+'" ng-class="getOverlayIconBoxClass()"><svg svg-icon="device-error'+prefix+'" ng-show="showIcon(\'error\')" class="overlay-not-available-icon__device"></svg><svg svg-icon="device-warn'+prefix+'" ng-show="showIcon(\'warning\')" class="overlay-not-available-icon__device"></svg><div class="tooltip top">{{\'msg_device_is_not_available_title\' | translate}}</div>')(elemScope);return $body.append($elem),{start:function(mode,count){setStates(mode,count),helper.blockMainPage("overlay-not-available")},stop:function(){clearStates(),helper.unblockMainPage("overlay-not-available")}}}])}();