"use strict";!function(){var nw=angular.module(regdep("nw-hostname"),[]);nw.directive("nwHostname",function(){return{restrict:"A",require:"ngModel",link:function($scope,$elem,$attrs,$model){function validator(value){return _.isUndefined(value)||$attrs.disabled?($model.$setValidity("msg_invalid_name_length",!0),$model.$setValidity("msg_invalid_hostname",!0)):($model.$setValidity("msg_invalid_hostname",isHostname(value)),$model.$setValidity("msg_invalid_name_length",value.length<64)),value}function isHostname(hostname){hostname=hostname.replace(/(^\s+|\s+$)/g,""),hostname=punycode.toASCII(hostname);var allowSymbol="";$attrs.nwHostnameAllow&&(allowSymbol=$attrs.nwHostnameAllow);var patt="^(xn--)?(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-"+allowSymbol+"]*[a-zA-Z0-9])\\.?)+([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])*$";_.isUndefined($attrs.nwHostnamePart)||(patt="^[\\.]{0,1}(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-"+allowSymbol+"]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9.])$");var re=new RegExp(patt);return hostname?re.test(hostname):!0}$model.$parsers.unshift(validator),$model.$formatters.unshift(validator),$model.$formatters.unshift(function(value){return punycode.toUnicode(value)}),$model.$parsers.unshift(function(value){return punycode.toASCII(value)})}}}),nw.directive("nwPunycode",function(){return{restrict:"A",scope:{text:"=nwPunycode"},link:function($scope,$elem){$scope.$watch("text",function(){$elem.text(punycode.toUnicode($scope.text))})}}})}();