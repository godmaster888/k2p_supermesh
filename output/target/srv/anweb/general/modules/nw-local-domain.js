"use strict";angular.module(regdep("nw-local-domain"),[]).directive("nwLocalDomain",[function(){return{restrict:"A",require:"ngModel",link:function($scope,$element,$attrs,$model){function validator(host){$scope.dom=host||"";var host=punycode.toASCII(host)||"",regDomain=/^(xn--)?(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])\.local$/;return host=host.replace(/(^\s+|\s+$)/g,""),host.length&&host.length>64?$model.$setValidity("msg_invalid_domain",!1):host.length&&!regDomain.test(host)?$model.$setValidity("msg_invalid_domain",!1):$model.$setValidity("msg_invalid_domain",!0),host}$model.$parsers.unshift(validator),$model.$formatters.unshift(validator),$model.$formatters.unshift(function(value){return punycode.toUnicode(value)}),$model.$parsers.unshift(function(value){return punycode.toASCII(value)})}}}]);