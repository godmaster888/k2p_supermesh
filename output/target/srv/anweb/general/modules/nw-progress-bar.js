"use strict";!function(){var nw=angular.module(regdep("nw-progress-bar"),[]);nw.directive("nwProgressBar",function(){function pbTypeClass(pbType){return pbTypeClasses[pbType]||""}var pbTypeClasses={indeter:"indeter"};return{template:'<div class="nw-progress-bar {{pbTypeClass}} {{pbHidden ? \'hidden\' : \'\'}}"><div class="nw-progress-text">{{pbText}}</div><div class="nw-progress-bg"></div><div class="nw-progress-band" ng-class="{ unicolor : isUnicolor }" ng-style="{\'width\':pbValue + \'%\', \'background-color\': getProgressColor()}"></div></div>',replace:!0,plain:!0,restrict:"AE",scope:{pbValue:"=",pbText:"=",pbType:"=",pbHidden:"=",pbUnicolor:"="},link:function($scope){var maxColorChannelValue=215;$scope.pbTypeClass=pbTypeClass($scope.pbType),$scope.getProgressColor=function(){return $scope.pbUnicolor?void($scope.isUnicolor=!0):$scope.pbValue?$scope.pbValue<=50?"rgb("+parseInt(maxColorChannelValue*$scope.pbValue/50)+","+maxColorChannelValue+",0)":"rgb("+maxColorChannelValue+","+(maxColorChannelValue-parseInt(maxColorChannelValue*($scope.pbValue-50)/50))+",0)":"'inherit'"}}}}),nw.directive("nwAutoProgressBar",["$interval","$rootScope",function($interval,$rootScope){return{template:'<nw-progress-bar pb-unicolor="pbUnicolor" pb-value="calcValue()"></nw-progress-bar>',restrict:"AE",scope:{pbDuration:"=",pbPause:"=",pbCallback:"&",pbUnicolor:"=",pbStartPosition:"=",pbRealTime:"="},link:function($scope){function start(){value=$scope.pbStartPosition?$scope.pbStartPosition:0,$interval.cancel(promise),pbCallback("started"),lastTick=Date.now(),promise=$interval(function(){var isSkiped,dt=Date.now()-lastTick;$scope.pbRealTime?(value+=dt,lastTick=Date.now()):value+=intervalValue,value>=$scope.pbDuration&&(isSkiped=dt>2*intervalValue,$rootScope.$broadcast("cricle_bar_finished",isSkiped),$interval.cancel(promise),pbCallback("finished",isSkiped))},intervalValue)}function stop(){$interval.cancel(promise)}function pbCallback(status,skiped){$scope.pbCallback&&$scope.pbCallback({status:status,skiped:skiped})}var promise=null,lastTick=null,intervalValue=1e3,value=0;$scope.calcValue=function(){return value/$scope.pbDuration*100},$scope.$watch("pbPause",function(pbPause){pbPause===!1?start():stop()})}}}])}();