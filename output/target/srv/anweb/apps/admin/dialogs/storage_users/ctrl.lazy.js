"use strict";angular.module("app").controllerProvider.register("storageUsersDialogCtrl",function($scope,snackbars,usersUtil){var pos=$scope.ngDialogData.pos,user=$scope.user=_.clone($scope.ngDialogData.user),usedName=_.without($scope.ngDialogData.usedName,user.Username)||[],invalidLogins=[],dataUser={};usersUtil.getInvalidLogins(function(data){invalidLogins=data},$scope),$scope.header=$scope.ngDialogData.header,$scope.readonly="0"!==user.Rule,$scope.save=function(){return $scope.storage_users_form.$valid?(dataUser.user=user,dataUser.position=pos,$scope.closeThisDialog(dataUser)):void 0},$scope.isValidLogin=function(login){return~invalidLogins.indexOf(login)?"sysusers_invalid_username":~usedName.indexOf(login)?"sysusers_used_username":null},$scope.isValidPassword=function(password){return password.length>31?"msg_invalid_password_length":null},$scope.isModified=function(){return!$scope.storage_users_form.$pristine},$scope.$watch("readonly",function(newVal){user.Rule=""+ +newVal})});