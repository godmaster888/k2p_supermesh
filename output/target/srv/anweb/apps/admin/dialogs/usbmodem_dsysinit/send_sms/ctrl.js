"use strict";!function(){angular.module("app").controller("SendMessageCtrl",function($scope,snackbars,USBModemUtil){$scope.message={numbersList:[],Text:"",addNumber:function(){$scope.message.numbersList.push({Number:""})},removeNumber:function(index){$scope.message.numbersList.splice(index,1)},isButtonDisabled:function(){return $scope.newSMS.$invalid||""==$scope.message.Text},send:function(){var overlay=$scope.overlay.circular,overlayId=overlay.start(),input={modem:data.modem,sim:data.sim,numbers:$scope.message.numbersList,text:$scope.message.Text};util.sendSMS(input).then(function(){snackbars.add("usb_modem_sms_msg_success_send"),$scope.closeThisDialog({success:!0})})["catch"](function(){snackbars.add("msg_rpc_write_error")})["finally"](overlay.stop.bind(overlay,overlayId))},validateNumber:function(value){if(!value)return null;var regexp=/^([\+]?\d+|[\*\#\d]+)$/g;return regexp.test(value)?null:"usb_modem_sms_invalid_number"},messageLimit:function(){return data.limit?data.limit==$scope.message.numbersList.length:!1}};var data=angular.copy($scope.ngDialogData.data),util=USBModemUtil;!function(){$scope.message.numbersList.push({Number:data.Number}),$scope.message.Text=data.Text}()})}();