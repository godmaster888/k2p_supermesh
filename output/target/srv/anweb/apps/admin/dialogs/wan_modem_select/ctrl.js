"use strict";function WANModemSelectCtrl($scope,devinfo,funcs,translate){function stopSubscribe(){devinfo.unsubscribe(modemPath,prepareData)}function prepareData(data){var input,result;if(data&&data[modemPath]){if(input=funcs.newConfig.normalize(funcs.fetchBranch(data[modemPath],modemPath)),!_.size(input))return;result=[],_.each(input,function(elem,key){var simList=[];_.each(funcs.newConfig.normalize(elem.SIM),function(sim,id){var modemName=elem.Internal?translate("wan_modem")+" "+key:elem.Model+" "+elem.Vendor;simList.push({Modem:modemName,Link:modemPath+key+". "+id,ActiveSIM:elem.ActiveSIM.toString(),IsInternal:elem.Internal,SIMName:"SIM"+sim.Name,IMSI:sim.IMSI,IsInserted:sim.Inserted&&"Removed"!=elem.State})}),result=result.concat(simList)}),$scope.modemList=result,stopSubscribe()}}var modemPath="Device.USB.Modem.";!function(){stopSubscribe(),devinfo.subscribe(modemPath,prepareData)}(),$scope.usbModemLoaderHidden=function(){return $scope.modemList&&$scope.modemList.length},$scope.closeDialog=function(){$scope.closeThisDialog(null)},$scope.selectModem=function(data){data.IsInserted&&$scope.closeThisDialog({data:data})},$scope.getIcon=function(item){return item.IsInternal?"sim_card":"usb_modem"}}