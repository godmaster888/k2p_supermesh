"use strict";!function(){angular.module("app").controller("vpnServerUsersDialogCtrl",function($scope,funcs,vpnServerUtil,translate){var usersList=$scope.ngDialogData.usersList,usedUsers=$scope.ngDialogData.usedUsers,clientRange=$scope.ngDialogData.clientRange;$scope.user={User:$scope.ngDialogData.user.User,RangeType:function(range){return range.MinAddress&&""!=range.MinAddress||range.MaxAddress&&""!=range.MaxAddress?!range.MinAddress||""==range.MinAddress||range.MaxAddress&&""!=range.MaxAddress?"range":"single":"auto"}($scope.ngDialogData.user.Range),Range:{__id:$scope.ngDialogData.user.Range.__id||void 0,MinAddress:$scope.ngDialogData.user.Range.MinAddress||"",MaxAddress:$scope.ngDialogData.user.Range.MaxAddress||""},__id:$scope.ngDialogData.user.__id,UsersList:function(){var result=[{name:translate("st_not_selected"),value:""}];return _.each(usersList,function(elem){_.contains(usedUsers,elem.value)&&elem.value!=$scope.ngDialogData.user.User||result.push(elem)}),result}(),RangeTypesList:function(){return[{name:"auto",value:"auto"},{name:"vpn_server_single_addr",value:"single"}]}(),save:function(){var data;return $scope.vpn_server_users_form.$valid?(data={__id:$scope.user.__id,User:$scope.user.User,Range:$scope.user.Range},$scope.closeThisDialog({write:data})):void 0},changeRangeType:function(){switch($scope.user.RangeType){case"auto":$scope.user.Range.MinAddress="",$scope.user.Range.MaxAddress="";break;case"single":$scope.user.Range.MaxAddress=""}},validationRange:function(value){return vpnServerUtil.validationClientRange(value,clientRange)},showNote:function(){return""!=clientRange.MinAddress&&""!=clientRange.MaxAddress&&funcs.is.ipv4(clientRange.MinAddress)&&funcs.is.ipv4(clientRange.MaxAddress)},getNote:function(){return translate("ip_from_range")+": "+clientRange.MinAddress+"-"+clientRange.MaxAddress}}})}();