"use strict";!function(){angular.module(regdep("menu-funcs"),[]).factory("menuFuncs",["$injector","menus","translate",function($injector,menus,translate){function getRuntimeMenu(runtime){return $injector.has(runtime+"Directive")?runtime.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase():void 0}return{makeMenuList:function(navs){function make(parent){var list=[];return _.each(menus,function(menu,inx){if(menu.runtime&&!menu.runtimeExists&&(menu.runtime=getRuntimeMenu(menu.runtime),menu.runtimeExists=!0),menu.parent==parent&&(menu.sref||!menu.id||navs[menu.id])){var psref=menu.sref&&menu.sref.replace(/\.?\w+$/,"");(!psref||navs[psref])&&(!menu.sref||navs[menu.sref]&&!navs[menu.sref].hide&&!navs[menu.sref].hidden)&&(menu.id&&(menu.submenu=make(menu.id)),menu.sref&&(menu.openPage=!0),menu.url&&(menu.external=!0),(menu.sref||menu.url||menu.submenu&&menu.submenu.length)&&(menu.id||(menu.id=menu.sref||"inx"+inx),list.push(menu)))}}),list}return make()},updateNavs:function($scope){var sep,domBackRect,domTitleRect,domBack=document.querySelector("#back_anchor"),domIcon=document.querySelector(".back_icon"),domTitle=document.querySelector("#title_anchor"),backState=$scope.backState(),scopeState=$scope.state();if(domBack)if($scope.backState()){if($scope.backState().params&&!$scope.backState().params.concatParams&&(domBack.innerHTML=$scope.backState().params&&$scope.backState().params.langParams?translate($scope.backState().title,$scope.backState().params.langParams):translate($scope.backState().title)),$scope.backState().params&&$scope.backState().params.concatParams){var sep=$scope.backState().params.concatParams;domBack.innerHTML=$scope.backState().title.split(sep)[1]?translate($scope.backState().title.split(sep)[0])+sep+translate($scope.backState().title.split(sep)[1]):translate($scope.backState().title.split(sep)[0])}}else domBack.innerHTML="";domTitle&&scopeState&&(scopeState.params&&!scopeState.params.concatParams&&(domTitle.innerHTML=scopeState.params&&scopeState.params.langParams?translate(scopeState.title,scopeState.params.langParams):translate(scopeState.title)),scopeState.params&&scopeState.params.concatParams&&(sep=scopeState.params.concatParams,domTitle.innerHTML=scopeState.title.split(sep)[1]?translate(scopeState.title.split(sep)[0])+sep+translate(scopeState.title.split(sep)[1]):translate(scopeState.title.split(sep)[0]))),domBack&&domTitle&&(domBackRect=domBack.getBoundingClientRect(),domTitleRect=domTitle.getBoundingClientRect(),domBackRect.right+20>domTitleRect.left?angular.element(domBack).css("visibility","hidden"):angular.element(domBack).css("visibility","visible")),backState?angular.element(domIcon).css("visibility","visible"):(angular.element(domBack).css("visibility","hidden"),angular.element(domIcon).css("visibility","hidden"))},selectSecondLevelMenu:function($scope,$state,menu){return $state.current.name==menu.id&&$state.reload(),1}}}])}();