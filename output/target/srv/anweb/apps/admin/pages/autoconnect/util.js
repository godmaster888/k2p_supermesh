"use strict";!function(){angular.module("app").service("AutoconnectUtil",["funcs","cpe",function(funcs,cpe){function getData(){return config?config:{}}function apply(settings){var result={};funcs.setValue(path.replace(/\.$/,""),settings,result);var diff=funcs.newConfig.makeDiff(__initConfig,result,attrs);return _.isEmpty(diff)?Promise.resolve():cpe.ApplyDifference(diff)}var path="Device.USB.AutoConnect.",config=null,attrs=null,__initConfig=null;return{pull:function(){return Promise.all([cpe.GetParameterValues([path]),cpe.GetParameterAttributes([path])]).then(function(response){var data=funcs.buildTree(response[0].result.ParameterList);return attrs=funcs.buildTreeAttributes(response[1].result.ParameterList),__initConfig=funcs.deepClone(data),config=funcs.fetchBranch(data,path),Promise.resolve()},function(){return Promise.reject()})},getData:getData,apply:apply}}])}();