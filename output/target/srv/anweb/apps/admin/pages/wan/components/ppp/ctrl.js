"use strict";angular.module("app").controller("WanPppCtrl",["$scope","wanPageCommon",function($scope,wanPageCommon){function setSelectAuthProtocols(){var authProt;conn.EncryptionProtocol&&"None"!=conn.EncryptionProtocol?($scope.selectAuthProtocols=collectAuthProtocols.filter(function(prot){return"MS-CHAP"==prot.value||"MS-CHAP-V2"==prot.value}),authProt=conn.AuthenticationProtocol,"MS-CHAP"!=authProt&&"MS-CHAP-V2"!=authProt&&(conn.AuthenticationProtocol=$scope.selectAuthProtocols[0].value)):$scope.selectAuthProtocols=collectAuthProtocols}var conn=$scope.conn;$scope.onDemand="OnDemand"==conn.ConnectionTrigger;var altConnectionTrigger=$scope.onDemand?"AlwaysOn":conn.ConnectionTrigger;$scope.onEncProtChange=setSelectAuthProtocols;var collectAuthProtocols=[{name:"AUTO",value:"AUTO"},{name:"PAP",value:"PAP"},{name:"CHAP",value:"CHAP"},{name:"MS-CHAP",value:"MS-CHAP"},{name:"MS-CHAPv2",value:"MS-CHAP-V2"}];"mobileinet"!=$scope.common.contype&&setSelectAuthProtocols(),$scope.onDemandChange=function(){conn.ConnectionTrigger=$scope.onDemand?"OnDemand":altConnectionTrigger},$scope.validationStaticIP=function(){var ip=conn.StaticIPAddress0;if(ip)if($scope.common.isIpv6){if(!funcs.is.ipv6(ip))return"msg_invalid_ipv6"}else if(!funcs.is.ipv4)return"msg_invalid_ipv4";return null},$scope.showOnDemand=function(){return!autoconf.BR2_PACKAGE_ANWEB_DSYSINIT||!/v6|dual/.test($scope.common.contype)},wanPageCommon.supportDualLAN&&($scope.disabledDuallan=function(){var duallan=$scope.common.duallan;return duallan&&duallan.__has?!1:!0})}]);