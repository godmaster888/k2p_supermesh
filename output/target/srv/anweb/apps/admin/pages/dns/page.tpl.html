<div ng-show="safeDNSWarning" class="card" alert="info">{{ dnsWarNotice | translate }}</div><div class="main-card"><form nw-form unsaved-warning-form unsaved-backup-status="{{!wasModified()}}" ng-submit="save()" name="dnsForm" class="dns_form" ng-show="!safeDNSWarning && dns"><div class="card-content"><div class="row-grid bottom-space"><div class="col-md-12"><div class="card-title" ng-bind="'dns_nav' | translate"></div><div class="card-desc" ng-bind="((autoconf.BR2_PACKAGE_ANWEB_DSYSINIT) ? 'dns_nav_desc_dsysinit' : 'dns_nav_desc') | translate"></div></div></div><div class="row-grid {{(!rules.DnsHideStaticHost) ? 'bottom-space' : ''}}"><div ng-class="{'break_avoid': availIPv6}" ng-repeat="(protocol, protocolData) in protocols"><div ng-class="{'col-md-6 block-left': (availIPv6 && protocol != 'V6'), 'col-md-6 block-right': (availIPv6 && protocol == 'V6')}"><div ng-class="{'col-md-6 block-left': !availIPv6}" ng-if="!isAPMode"><div class="row-grid bottom-space"><div class="card-subtitle">{{ protocol == 'V4'? 'DNS IPv4' : 'DNS IPv6'}}</div><div nw-labeled-switch nw-label="manual" nw-model="dns[protocol].Manual" nw-disabled="customRules.DisableDNSManual"></div><div nw-labeled-switch nw-label="defgw" nw-model="dns[protocol].Defroute" ng-if="availDefroute" ng-hide="dns[protocol].Manual" nw-disabled="customRules.DisableDNSDefroute"></div><div nw-field nw-label="interface" nw-disabled="dns[protocol].Manual || dns[protocol].Defroute || customRules.DisableDNSInterface"><select ng-model="dns[protocol].Ifname" ng-options="iface as data.Name | translate for (iface, data) in ifaces[protocol]"></select></div></div></div><div ng-class="{'col-md-6 block-right': !availIPv6}" ng-if="(dns[protocol].Manual || isAPMode) && hasManual()"><div class="row-grid bottom-space"><div class="changing_list"><div class="card-subtitle">{{ {lang: 'dns_name_servers', name: protocol == 'V4'? 'IPv4': 'IPv6', abr: 'name'} | translate }}</div><div class="input_with_action" ng-repeat="(inx, server) in dns[protocol].Servers"><div nw-field nw-disabled="customRules.DisableEditDNS"><input ng-model="dns[protocol].Servers[inx]" nw-type="{{protocolData.name}}" placeholder="{{'dns_example' | translate}}: {{protocolData.example}}" nw-set-focus="{{dns[protocol].focus == true}}" nw-custom-valid="checkDnsServer(addr, inx, protocol, 'Servers')" class="under_cross"></div><div class="input_action" ng-if="!customRules.DisableEditDNS" ng-click="removeServer(protocol, inx, 'Servers')">×</div></div><div class="button_block right"><input type="button" ng-click="add(protocol, 'Servers')" value="{{'act_add_server' | translate}}" class="colored flat" ng-disabled="isDisabledButtonAdd() || customRules.DisableEditDNS"></div></div></div></div><div ng-class="{'col-md-6 block-right': (!availIPv6  && !(dns[protocol].Manual || isAPMode)), 'col-md-6 block-left': (!availIPv6 && (dns[protocol].Manual || isAPMode))}"><div class="row-grid {{(!rules.DnsHideStaticHost) ? 'bottom-space' : ''}}" ng-if="supported(dns[protocol], 'After')"><div class="changing_list"><div class="card-subtitle">{{{lang: 'dns_reserv_servers', name: protocol == 'V4'? 'IPv4': 'IPv6', abr: 'name'} | translate}}</div><div class="input_with_action" ng-repeat="(inx, server) in dns[protocol].After"><div nw-field><input ng-model="dns[protocol].After[inx].IPAddress" nw-type="{{protocolData.name}}" placeholder="{{'dns_example' | translate}}: {{protocolData.example}}" nw-set-focus="{{dns[protocol].focus == true}}" nw-custom-valid="checkDnsServer(addr, inx, protocol, 'After')" class="under_cross"></div><div class="input_action" ng-click="removeServer(protocol, inx, 'After')">×</div></div><div class="button_block right"><input type="button" ng-click="add(protocol, 'After')" value="{{'act_add_server' | translate}}" class="colored flat" ng-disabled="isDisabledButtonAdd()"></div></div></div></div></div></div></div><div class="row-grid" ng-if="!rules.DnsHideStaticHost && supported(dns, 'Hosts')"><div class="col-md-12"><div class="table" nw-table nw-table-empty-status="hosts.isEmpty()" nw-table-empty-title="dns_hosts_list" nw-table-empty-subtitle="dns_empty_state_msg" nw-table-empty-button="act_add" nw-table-empty-button-click="hosts.add()" nw-table-title="dns_hosts_list" nw-table-on-add="hosts.add()" nw-table-on-add-hide="customRules.HideDNSAdd" nw-table-on-delete="hosts.remove(items, keys)" nw-table-on-edit="hosts.edit(item, key)" nw-table-selected><table><thead><tr><th ng-bind="'dns_hosts_ip' | translate"></th><th ng-bind="'dns_hosts_name' | translate"></th></tr></thead><tbody><tr ng-repeat="(inx, item) in dns.Hosts track by inx" nw-mini-table nw-mini-table-caption="item.hostname" nw-mini-table-details="item.ip"><td ng-bind="item.ip"></td><td class="break" nw-punycode="item.hostname"></td></tr></tbody></table></div></div></div></div><div class="card-action"><button type="submit" class="colored" ng-disabled="!wasModified()">{{'act_apply' | translate}}</button></div></form></div>