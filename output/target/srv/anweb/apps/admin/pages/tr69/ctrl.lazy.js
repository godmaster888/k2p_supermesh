"use strict";angular.module("app").controllerProvider.register("Tr69Ctrl",["$scope","$state","tr069Util","funcs","snackbars","translate","navigationFilter",function($scope,$state,util,funcs,snackbars,translate,navFilter){function init(){util.pull().then(function(){$scope.data=util.getConfig(),__backupTmp=angular.copy($scope.data.tmp),__backupTr69=angular.copy($scope.data.tr69),$scope.$emit("pageload")})["catch"](function(){$state.go("error",{code:"msg_pull_error",message:"msg_error_desc"})})}$scope.customRules=navFilter.rules();var __backupTr69=null,__backupTmp=null;init(),$scope.isDisabledSubmit=function(){return $scope.tr69Form.$pristine},$scope.wasModified=function(){return __backupTmp&&!_.isEqual(__backupTmp,angular.copy($scope.data.tmp))||__backupTr69&&!_.isEqual(__backupTr69,angular.copy($scope.data.tr69))},$scope.save=function(){if(!$scope.tr69Form.$invalid){var overlay=$scope.overlay.circular,overlayId=overlay.start();util.apply($scope.data).then(function(){snackbars.add("msg_rpc_write_success"),init()})["catch"](function(){snackbars.add("msg_rpc_write_error")})["finally"](overlay.stop.bind(overlay,overlayId))}},$scope.getDSCPMarkList=function(){return[{name:"CS0",value:0},{name:"CS1",value:1},{name:"CS2",value:2},{name:"CS3",value:3},{name:"CS4",value:4},{name:"CS5",value:5},{name:"CS6",value:6},{name:"CS7",value:7},{name:"EF",value:8}]},$scope.checkStunPeriod=function(){return $scope.data.tr69.StunMinPeriod>0&&$scope.data.tr69.StunMaxPeriod>0&&$scope.data.tr69.StunMinPeriod>$scope.data.tr69.StunMaxPeriod?"tr69StunPerionMinMoreMax":null},$scope.getLabel=function(key,abr){return translate("act_enable_it",{name:key,abr:abr})},$scope.support=function(param){return $scope.data&&_.has($scope.data.tr69,param)},$scope.validateLength=function(value,length){return value&&value.length>length?"msg_invalid_name_length":null}}]);