"use strict";!function(){angular.module("app").service("tr069Util",["funcs","device","cpe",function(funcs,device,cpe){function getConfig(){return config?config:{}}function apply(settings){var data=converter.nativeToDsysinit(settings),diff=funcs.newConfig.makeDiff(__initConfig,data,attrs);return _.isEmpty(diff)?Promise.resolve():cpe.ApplyDifference(diff)}var config,attrs,__initConfig,converter=device.tr69.converter,paths={tr:"Device.Services.TR069.",conns:"Device.Network.Connection.",ifaces:"Device.Network.Interface."};return{pull:function(){return Promise.all([cpe.GetParameterValues([paths.tr,paths.conns,paths.ifaces]),cpe.GetParameterAttributes([paths.tr])]).then(function(response){var data=funcs.buildTree(response[0].result.ParameterList);return attrs=funcs.buildTreeAttributes(response[1].result.ParameterList),__initConfig=funcs.deepClone(data),config=converter.dsysinitToNative(data),Promise.resolve()})["catch"](function(){return Promise.reject()})},apply:apply,getConfig:getConfig}}])}();