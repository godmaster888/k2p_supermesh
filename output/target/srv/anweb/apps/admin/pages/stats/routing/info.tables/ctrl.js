"use strict";!function(){angular.module("app").controller("routingStatsTablesCtrl",["$scope","$state","StatsRoutingUtil","translate","devinfo","ngDialog","funcs",function($scope,$state,util,translate,devinfo,ngDialog,funcs){function edit(item){$state.go(currentState+".routingParam.edit",{table:item.id,tname:item.name})}function activate(){helper=util.makeHelper(),$scope.routingTables.list=helper.getTables(),$scope.routingTables.rules=helper.getRules(),util.subscribeInfo(onInfoLoaded,$scope)}function onInfoLoaded(data){$scope.routingTables.list=data.Tables,$scope.routingTables.rules=data.Rules,$scope.$emit("pageload")}var helper;$scope.routingTables={list:null,rules:null,edit:edit,getDescription:function(item){return/main/.test(item.name)?translate("stats_routing_desc_table_main"):/group/.test(item.name)?translate("stats_routing_desc_table_other",{name:translate("ifgroups_groups")}):translate("stats_routing_desc_table_other",{name:translate("connections")})},getMiniRulesInfo:function(item){return[translate("type")+": "+item.addressFamily,translate("shorewall_zones_interfaces")+": "+item.incomingIface+"/"+item.outgoingIface,translate("priority")+": "+item.priority,"FWmark (HEX): "+item.fwMark]},showDetails:function(item){devinfo.suspend();var dlg=ngDialog.open({template:"dialogs/stats/route_rules_stat_details/dialog.tpl.html",controller:"routeRulesStatDetailsCtrl",resolve:funcs.getLazyResolve("dialogs/stats/route_rules_stat_details/ctrl.lazy.js","routeRulesStatDetailsCtrl"),data:{model:item}});dlg.closePromise.then(function(){devinfo.resume()})},getHeader:function(type){return"IP"==type?"IP ("+translate("source")+"/"+translate("dest")+")":"Iface"==type?translate("shorewall_zones_interfaces")+" ("+translate("stats_routing_incoming")+"/"+translate("stats_routing_outgoing")+")":void 0}};var currentState=$state.current.name.split(".");currentState.pop(),currentState=currentState.join("."),activate()}])}();