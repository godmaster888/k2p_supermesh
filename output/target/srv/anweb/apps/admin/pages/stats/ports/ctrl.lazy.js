"use strict";angular.module("app").controllerProvider.register("portStatsCtrl",["$scope","statsPortsUtil","$state","translate",function($scope,util,$state,translate){$scope.units=autoconf.BR2_PACKAGE_ANWEB_SWITCH?"B":"MB";var currentState=$state.current.name.split(".");currentState.pop(),currentState=currentState.join("."),util.subscribeInfo(function(data){$scope.portStats=data&&data.ports||[],$scope.preload=data.preload,$scope.$emit("pageload")},$scope),$scope.showDetails=function(port){console.log(currentState+".portDetails"),$state.go(currentState+".portDetails",{portAlias:port.alias.replace("/","")})},$scope.format=function(value){return"MB"==$scope.units?Math.floor(value/1048576):value},$scope.checkBytes=function(item){return $scope.format(item.BytesSent)||$scope.format(item.BytesReceived)?$scope.format(item.BytesSent)+" / "+$scope.format(item.BytesReceived)+" "+translate("units_"+$scope.units):Number(item.PacketsReceived)||Number(item.PacketsSent)?item.PacketsSent+" / "+item.PacketsReceived:void 0},$scope.hasParam=function(param){return _.every($scope.portStats,function(elem){return _.has(elem,param)})},$scope.getStatus=function(status){return _.isUndefined(status)?"-":translate(status?"stats_ports_connected":"stats_ports_disconnected")}}]);