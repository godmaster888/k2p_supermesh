"use strict";!function(){angular.module("app").service("StatsDHCPUtil",["cpe","device","devinfo","funcs","statsDHCPConstants",function(cpe,device,devinfo,funcs,constants){function makeHelper(){return new device.statsDHCP.Helper(config)}var config=null,converter=device.statsDHCP.converter;return{pull:function(){function success(response){return config=funcs.buildTree(response[0].result.ParameterList),config=converter.dsysinitToNative(config),Promise.resolve()}return Promise.all([cpe.GetParameterValues([constants.servers,constants.hostnames])]).then(success,function(){return Promise.reject()})},subscribeInfo:function(cb,$scope){devinfo.onceAndSubscribe(constants.servers+"|"+constants.hostnames,function(response){if(response&&response[constants.servers]){var servers=funcs.splitTree(response[constants.servers]),hostnames=funcs.splitTree(response[constants.hostnames]),input=servers.concat(hostnames),data=converter.dsysinitToNative(funcs.buildTree(input));cb&&cb(data)}},$scope)},makeHelper:makeHelper}}])}();