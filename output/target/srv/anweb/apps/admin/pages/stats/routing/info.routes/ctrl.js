"use strict";angular.module("app").controller("routingStatsInfoCtrl",["$scope","$state","StatsRoutingUtil","devinfo","funcs","ngDialog",function($scope,$state,util,devinfo,funcs,ngDialog){function init(){helper=util.makeHelper(),onInfoLoaded(helper.getData()),util.subscribeInfo(onInfoLoaded,$scope)}function onInfoLoaded(data){var routing=_.has(data,"Routing")?data.Routing:data;$scope.routingStats=_.filter(routing,function(e){return tableID?e.table==tableID:!0}),$scope.$emit("pageload")}var helper,tableID=$state.params.table?$state.params.table:void 0;$scope.tableName=$state.params.tname?$state.params.tname:"",init(),$scope.getDestString=function(item){return helper.getDestString(item)},$scope.showDetails=function(item){devinfo.suspend();var dlg=ngDialog.open({template:"dialogs/stats/route_stat_details/dialog.tpl.html",controller:"routeStatDetailsCtrl",resolve:funcs.getLazyResolve("dialogs/stats/route_stat_details/ctrl.lazy.js","routeStatDetailsCtrl"),data:{model:item}});dlg.closePromise.then(function(){devinfo.resume()})},$scope.needTable=function(){return util.needTable()}}]);