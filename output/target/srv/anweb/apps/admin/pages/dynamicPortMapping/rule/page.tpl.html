<div ng-controller="dynPortMappingRuleCtrl"><div class="main-card"><form name="upnpForm" class="css-form" novalidate nw-form unsaved-warning-form ng-submit="portMapping.apply()" unsaved-backup-status="{{!portMapping.wasModified()}}"><div class="card-content" ng-if="portMapping.isActivate"><div class="row-grid bottom-space"><div class="card-title" ng-bind="'upnp_nav' | translate"></div><div class="card-desc" ng-bind="'upnp_nav_desc' | translate"></div></div><div ng-if="portMapping.Mode == 'Firewall'"><div nw-labeled-switch nw-label="act_enable" nw-model="portMapping.rule.Enable"></div><div class="row-grid bottom-space"><div class="col-md-6 block-left"><div nw-field nw-label="upnp_mapping_policy_default"><select ng-model="portMapping.rule.DefaultPolicy" ng-options="option.value as (option.name | translate) for option in portMapping.attrs.DefaultPolicy"></select></div><div nw-field nw-label="wan_iface_type"><select ng-model="portMapping.rule.IfaceType" ng-options="option.value as (option.name | translate) for option in portMapping.attrs.IfaceType"></select></div><div nw-field nw-label="upnp_mapping_int_iface" nw-required ng-if="portMapping.rule.IfaceType == 'iface'"><select ng-model="portMapping.rule.InternalInterface" ng-options="option.value as (option.name | translate) for option in portMapping.attrs.InternalInterface" ng-change="portMapping.changeIfaces(portMapping.rule.InternalInterface)"></select></div><div nw-field nw-label="upnp_mapping_ext_iface" nw-required ng-if="portMapping.rule.IfaceType == 'iface'"><select ng-model="portMapping.rule.ExternalInterface" ng-options="option.value as (option.name | translate) for option in portMapping.attrs.ExternalInterface"></select></div><div nw-field nw-label="wan_group" nw-required ng-if="portMapping.rule.IfaceType == 'wan_group'"><select ng-model="portMapping.rule.WANGroup" ng-options="option.value as (option.name | translate) for option in portMapping.attrs.WANGroup"></select></div></div><div class="col-md-6 block-right"><div nw-labeled-switch nw-label="upnp_mapping_enable_nat_pmp" nw-model="portMapping.rule.NATPMP.Enable"></div><div class="card-title" ng-bind="'PCP' | translate"></div><div nw-field nw-label="upnp_mapping_max_life_time"><input nw-number nw-min="120" nw-max="86400" ng-model="portMapping.rule.PCP.MaxLifeTime"></div><div nw-field nw-label="upnp_mapping_min_life_time"><input nw-number nw-min="120" nw-max="86400" ng-model="portMapping.rule.PCP.MinLifeTime"></div><div class="card-title" ng-bind="'UPnP' | translate"></div><div nw-labeled-switch nw-label="upnp_mapping_enable_upnp_igd" nw-model="portMapping.rule.UPnP.Enable"></div><div nw-labeled-switch nw-label="upnp_mapping_enable_sec_mode" nw-model="portMapping.rule.UPnP.SecureMode"></div></div></div><div class="row-grid bottom-space"><div class="table" nw-table nw-table-empty-status="portMapping.rule.Permissions.length == 0" nw-table-empty-title="upnp_mapping_permission_title" nw-table-empty-subtitle="upnp_mapping_warn_permission_empty" nw-table-empty-button="act_add" nw-table-empty-button-click="portMapping.permissions.add()" nw-table-title="upnp_mapping_permission_title" nw-table-on-add="portMapping.permissions.add()" nw-table-on-edit="portMapping.permissions.edit(item, inx)" nw-table-on-delete="portMapping.permissions.remove(items, inx)" nw-table-selected><table><thead><tr><th ng-bind="'upnp_mapping_ext_ports' | translate"></th><th ng-bind="'upnp_mapping_int_ports' | translate"></th><th ng-bind="'ip_address' | translate"></th><th ng-bind="'upnp_mapping_policy' | translate"></th></tr></thead><tbody><tr ng-repeat="item in portMapping.rule.Permissions" nw-mini-table nw-mini-table-rows="portMapping.getShortPerm(item)"><td ng-bind="portMapping.getPorts(item, 'External')"></td><td ng-bind="portMapping.getPorts(item, 'Internal')"></td><td ng-bind="item.InternalAddress || '-'"></td><td ng-bind="item.Policy | translate"></td></tr></tbody></table></div></div></div><div ng-if="portMapping.Mode == 'Router'"><div nw-labeled-switch nw-label="act_enable" nw-model="portMapping.rule.Enable" nw-change="portMapping.apply('upnp')"></div></div><div class="row-grid"><div class="table upnp" nw-table nw-table-title="IPv4 IGD" ng-if="portMapping.rule.Enable && portMapping.showTable()"><table><thead><tr><th ng-bind="'protocol' | translate"></th><th ng-bind="'ip_address' | translate"></th><th ng-bind="'upnp_private_port' | translate"></th><th ng-bind="'upnp_public_port' | translate"></th><th ng-bind="'upnp_descr' | translate"></th><th ng-bind="'duration' | translate"></th></tr></thead><tbody><tr ng-repeat="(key, item) in portMapping.rule.Leases" nw-mini-table nw-mini-table-caption="portMapping.getCaptionLeases(item)" nw-mini-table-details="portMapping.getShortLeases(item)"><td ng-bind="item.Protocol"></td><td ng-bind="item.InternalAddr"></td><td ng-bind="item.InternalPort || '-'"></td><td ng-bind="item.ExternalPort || '-'"></td><td ng-bind="item.Description"></td><td ng-bind="item.TimeStamp"></td></tr></tbody></table></div></div></div><div class="card-action" ng-if="portMapping.isActivate && portMapping.Mode == 'Firewall'"><button type="submit" class="colored" ng-disabled="!portMapping.wasModified()" ng-bind="'act_apply' | translate"></button></div></form></div></div>