"use strict";angular.module("app").controllerProvider.register("RedirectCtrl",["$scope","somovd","funcs","snackbars","translate","redirectUtil",function($scope,somovd,funcs,snackbars,translate,util){function init(overlayId){util.pull().then(function(redirect){$scope.redirect=redirect,$scope.modules=util.getModulesList(),__backup=angular.copy($scope.redirect)})["catch"](function(){$state.go("error",{code:"msg_pull_error",message:"msg_error_desc"})})["finally"](function(){overlayId&&overlay.stop(overlayId),$scope.$emit("pageload")})}var __backup=null,overlay=$scope.overlay.circular;init(),$scope.apply=function(){var overlayId=overlay.start();util.apply($scope.redirect).then(function(){snackbars.add("msg_apply_success"),init(overlayId)})["catch"](function(){overlay.stop(overlayId),$state.go("error",{code:"msg_push_error",message:"msg_error_desc"})})},$scope.getLabel=function(name){return translate("redirect_"+name.toLowerCase())},$scope.wasModified=function(){return __backup&&!_.isEqual(__backup,angular.copy($scope.redirect))}}]);