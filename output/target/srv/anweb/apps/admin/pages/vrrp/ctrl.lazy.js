"use strict";!function(){angular.module("app").controllerProvider.register("VrrpCtrl",["$scope","$state","funcs","VrrpUtil","translate",function($scope,$state,funcs,util){function init(){function updateDate(response){$scope.vrrp.data.State=response.State?response.State:$scope.vrrp.data.State,$scope.vrrp.data.Status=response.Status?response.Status:$scope.vrrp.data.Status,$scope.vrrp.data.CurrentPriority=response.CurrentPriority?response.CurrentPriority:$scope.vrrp.data.CurrentPriority}util.pull().then(function(){$scope.vrrp.data=util.getData(),$scope.vrrp.__initData=funcs.deepClone($scope.vrrp.data),$scope.vrrp.ifaces=util.getIfaces(),$scope.vrrp.conns=util.getConns(),util.subscribeInfo(updateDate,$scope),$scope.vrrp.isActivate=!0,$scope.$emit("pageload")})["catch"](function(){$state.go("error",{code:"msg_pull_error",message:"msg_error_desc"})})}$scope.vrrp={data:null,__initData:null,ifaces:null,authList:[{name:"wan_ppp_no_auth",value:"none"},{name:"PW",value:"pw"}],isActivate:!1,wasModified:function(){return $scope.vrrp.data&&$scope.vrrp.__initData&&!function(data,initData){if(Object.keys(data).length!=Object.keys(initData).length)return!1;for(var i in data){if(void 0==initData[i])return!1;if("State"!=i&&"Status"!=i&&"CurrentPriority"!=i&&data[i]!=initData[i])return!1}return!0}($scope.vrrp.data,$scope.vrrp.__initData)},apply:function(){if(!$scope.form.$invalid){var overlay=$scope.overlay.circular,overlayId=overlay.start();util.apply($scope.vrrp.data).then(init)["catch"](function(){$state.go("error",{code:"msg_push_error",message:"msg_error_desc"})})["finally"](overlay.stop.bind(overlay,overlayId))}},getState:function(){},getStatus:function(status){switch(status){case"Enabled":return"on";case"Enabling":case"Disabling":return"pending";case"Disabled":case"Aborted":return"off"}},getStatusText:function(status){switch(status){case"Enabled":return"ipsec_status_enabled";case"Enabling":return"ipsec_status_enabling";case"Disabling":return"ipsec_status_disabling";case"Disabled":case"Aborted":return"wifi_wds_mode_disabled"}},checkKey:function(key){if(""==key)return null;if(key.length>8)return"msg_invalid_key_length";var reg=/^0x[0-9a-fA-F]+$/;return reg.test(key)?null:"qos_incorrect_value"}},init()}])}();