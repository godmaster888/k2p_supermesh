"use strict";!function(){function storageUsersCtrl($scope,funcs,snackbars,ngDialog,translate,$state,util){function init(){util.pull().then(function(){$scope.users=util.getSettings().users,$scope.$emit("pageload")})["catch"](function(){$state.go("error",{code:"msg_pull_error",message:"msg_error_desc"})})}function openDialog(pos,user,header){ngDialog.open({template:"dialogs/storage_users/dialog.tpl.html",className:"storage_users_dialog",controller:"storageUsersDialogCtrl",resolve:funcs.getLazyResolve("dialogs/storage_users/ctrl.lazy.js","storageUsersDialogCtrl"),data:{pos:pos,user:user,header:header,usedName:_.pluck($scope.users,"Username")},scope:$scope}).closePromise.then(function(data){var overlay,overlayId;data.value&&(overlay=$scope.overlay.circular,overlayId=overlay.start(),util.apply(data.value).then(function(){init(),snackbars.add("msg_rpc_write_success")})["catch"](function(){snackbars.add("msg_rpc_write_error")})["finally"](overlay.stop.bind(overlay,overlayId)))})}function getUserTemplate(){return{Username:"",Password:"",Rule:"0"}}$scope.isShowPassword=!1,init(),$scope.add=function(){openDialog(-1,getUserTemplate(),"sysusers_add")},$scope.edit=function(item,key){openDialog(key,item,"sysusers_edit")},$scope.remove=function(items,keys){var overlay=$scope.overlay.circular,overlayId=overlay.start();util.remove(items,keys).then(function(){init(),snackbars.add("msg_rpc_remove_success")},function(){snackbars.add("msg_rpc_remove_error")})["finally"](overlay.stop.bind(overlay,overlayId))},$scope.isEmptyUsers=function(){return $scope.users&&!$scope.users.length},$scope.hidePass=function(pass){return Array(pass.length+1).join("*")}}angular.module("app").controllerProvider.register("storageUsersCtrl",storageUsersCtrl),storageUsersCtrl.$inject=["$scope","funcs","snackbars","ngDialog","translate","$state","usersUtil"]}();