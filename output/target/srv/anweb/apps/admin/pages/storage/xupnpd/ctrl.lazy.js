"use strict";!function(){function StorageXupnpdController($scope,somovd,funcs,snackbars,$state,util,ngDialog,translate){function activate(){$scope.xupnpd=util.getSettings(),__backupXupnpd=angular.copy($scope.xupnpd),$scope.isValidPath=$scope.xupnpd.DirPath?$scope.xupnpd.ValidPath:!0,$scope.$emit("pageload")}function init(){util.pull().then(activate)["catch"](function(){$state.go("error",{code:"msg_pull_error",message:"msg_error_desc"})})}var __backupXupnpd=null;$scope.getServiceLink=function(){return document.location.protocol+"//"+document.location.hostname+":4044"},$scope.save=function(){$scope.form.$invalid||util.apply($scope.xupnpd).then(function(){util.pull().then(function(){var tmpXupnpd=util.getSettings();tmpXupnpd.Enable?!tmpXupnpd.ValidPath&&tmpXupnpd.DirPath?($scope.isValidPath=!1,alert(translate("syslog_invalid_usb_path")),snackbars.add("syslog_invalid_usb_path")):($scope.isValidPath=!0,snackbars.add("msg_rpc_write_success")):snackbars.add("msg_rpc_write_success")}),init()})["catch"](function(){snackbars.add("msg_rpc_write_error")})},$scope.saveEnabled=function(){if(!$scope.xupnpd)return!1;var changes=funcs.getChangesWithRemoved(__backupXupnpd,angular.copy($scope.xupnpd));return!_.isEmpty(changes)},$scope.openFileBrowser=function(path){ngDialog.open({template:"dialogs/filebrowser/dialog.tpl.html",controller:"DialogFileBrowserCtrl",resolve:funcs.getLazyResolve("dialogs/filebrowser/ctrl.lazy.js","DialogFileBrowserCtrl"),data:{title:"",Path:path},scope:$scope}).closePromise.then(function(data){$scope.xupnpd.DirPath=data.value})},init()}angular.module("app").controllerProvider.register("storageXupnpdController",StorageXupnpdController),StorageXupnpdController.$inject=["$scope","somovd","funcs","snackbars","$state","xupnpdUtil","ngDialog","translate"]}();