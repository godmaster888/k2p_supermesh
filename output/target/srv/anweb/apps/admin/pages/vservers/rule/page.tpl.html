<div class="main-card"><form name="form" class="css-form" novalidate nw-form ng-submit="vservers.apply()" unsaved-warning-form unsaved-backup-status="{{!vservers.wasModified()}}"><div class="card-content" ng-if="vservers.isActivate"><div class="row-grid bottom-space"><div class="col-md-6 block-left"><div class="card-title" ng-bind="'vservers_general_settings' | translate"></div><div nw-labeled-switch nw-label="act_enable" nw-model="vservers.rule.Enable"></div><div nw-field nw-label="name" nw-required><input ng-model="vservers.rule.Name" nw-custom-valid="vservers.validation(value, 'name')"></div><div nw-field nw-label="vservers_type" nw-disabled="vservers.action == 'edit'"><div class="custom-select"><select ng-model="vservers.rule.Type" ng-options="option.value as option.name|translate for option in vservers.getTypesList()" ng-change="vservers.changeType(vservers.rule.Type)"></select></div></div><div nw-field nw-label="iface" nw-disabled="vservers.isDisabled('Source.Iface')"><select ng-model="vservers.rule.Source.Iface" ng-options="option.Value as option.Name|translate for option in vservers.getInterfaceList()"></select></div><div nw-field nw-label="protocol"><select ng-model="vservers.rule.Proto" ng-options="option.value as option.name|translate for option in vservers.getProtocolList()"></select></div><div nw-labeled-switch nw-label="vservers_nat_loopback" nw-model="vservers.rule.SNAT" nw-disabled="autoconf.BR2_PACKAGE_ANWEB_DSYSINIT && !vservers.rule.Enable" ng-show="vservers.rule.Type != 'wakeonlan'"></div></div><div class="col-md-6 block-right"><div class="card-title" ng-bind="'vservers_private_network_settings' | translate"></div><div nw-field nw-label="vservers_private_ip" nw-required nw-disabled="vservers.isDisabled('Dest.IP')"><input ng-model="vservers.rule.Dest.IP[0]" nw-custom-valid="vservers.validation(value, 'destIp')" nw-client-list nw-client-list-version="ipv4" nw-client-list-filter-fn="vservers.filterPrivateList"></div><div nw-port-range nw-port-start-label="vservers_private_port_begin" nw-port-start-required="true" nw-port-start-disabled="vservers.isDisabled('Dest.Ports')" nw-port-start-model="vservers.rule.Dest.Ports['1'].Start" nw-port-end-label="vservers_private_port_end" nw-port-end-disabled="vservers.isDisabled('Dest.Ports')" nw-port-end-model="vservers.rule.Dest.Ports['1'].End" ng-if="autoconf.BR2_PACKAGE_ANWEB_RESIDENT || (!autoconf.BR2_PACKAGE_ANWEB_RESIDENT && vservers.rule.Type == 'ftp')"></div><div nw-port-range-new="vservers.rule.Dest.Ports['1']" nw-port-start-label="vservers_private_port_begin" nw-port-start-required="true" nw-port-start-disabled="vservers.isDisabled('Dest.Ports')" nw-port-start-model="vservers.rule.Dest.Ports['1'].Start" nw-port-end-label="vservers_private_port_end" nw-port-end-disabled="vservers.isDisabled('Dest.Ports')" nw-port-end-model="vservers.rule.Dest.Ports['1'].End" nw-port-list-label="vservers_private_ports" nw-port-list-required="true" nw-port-list-disabled="vservers.isDisabled('Dest.Ports')" nw-port-list-model="vservers.rule.Dest.Ports['1'].Start" nw-port-list-compare="vservers.rule.Source.Ports['1'].Start" nw-port-list-type="Port" nw-port-rule-template="vservers.rule.Type" nw-port-rule-type="vservers.rule.Dest.Ports['1'].PortType" nw-port-rule-type-validation="vservers.portsTypeValidation()" ng-if="!autoconf.BR2_PACKAGE_ANWEB_RESIDENT && vservers.rule.Type != 'ftp'"></div></div></div><div class="row-grid bottom-space"><div class="col-md-6 block-left"><div class="card-title" ng-bind="'vservers_public_network_settings' | translate"></div><div class="changing_list"><div class="card-title" ng-bind="'vservers_remote_ip' | translate"></div><div class="note" ng-bind="'vservers_ip_note_only_not_range' | translate"></div><div class="input_with_action" ng-repeat="(inx, ip) in vservers.rule.Source.IP track by inx"><div nw-field><input nw-type="ipv4AddressOrSubnet" ng-model="vservers.rule.Source.IP[inx]" placeholder="{{'vservers_remote_ip' | translate}}" nw-set-focus="{{vservers.sourceIpfocus==true}}" nw-custom-valid="vservers.ipValidation(vservers.rule.Source.IP[inx], 'public', inx)" class="under_cross"></div><div class="input_action" ng-click="vservers.removeSourceIp(ip, inx)">Ã—</div></div><div class="button_block right"><input type="button" ng-click="vservers.addSourceIp()" value="{{'vservers_add_remote_ip' | translate}}" class="colored flat"></div></div><div nw-port-range nw-port-start-label="vservers_public_port_begin" nw-port-start-required="true" nw-port-start-disabled="vservers.isDisabled('Source.Ports')" nw-port-start-model="vservers.rule.Source.Ports['1'].Start" nw-port-end-label="vservers_public_port_end" nw-port-end-disabled="vservers.isDisabled('Source.Ports')" nw-port-end-model="vservers.rule.Source.Ports['1'].End" nw-port-use-ports="vservers.useSourcePorts" ng-if="autoconf.BR2_PACKAGE_ANWEB_RESIDENT || (!autoconf.BR2_PACKAGE_ANWEB_RESIDENT && vservers.rule.Type == 'ftp')"></div><div nw-port-range-new="vservers.rule.Source.Ports['1']" nw-port-start-label="vservers_public_port_begin" nw-port-start-required="true" nw-port-start-disabled="vservers.isDisabled('Source.Ports')" nw-port-start-model="vservers.rule.Source.Ports['1'].Start" nw-port-end-label="vservers_public_port_end" nw-port-end-disabled="vservers.isDisabled('Source.Ports')" nw-port-end-model="vservers.rule.Source.Ports['1'].End" nw-port-use-ports="vservers.useSourcePorts" nw-port-list-label="vservers_public_ports" nw-port-list-required="true" nw-port-list-disabled="vservers.isDisabled('Source.Ports')" nw-port-list-model="vservers.rule.Source.Ports['1'].Start" nw-port-list-compare="vservers.rule.Dest.Ports['1'].Start" nw-port-list-type="Port" nw-port-rule-template="vservers.rule.Type" nw-port-rule-type="vservers.rule.Source.Ports['1'].PortType" nw-port-rule-type-validation="vservers.portsTypeValidation()" ng-if="!autoconf.BR2_PACKAGE_ANWEB_RESIDENT && vservers.rule.Type != 'ftp'"></div></div><div class="col-md-6 block-right"><div class="alert-block" alert="info" ng-if="vservers.useSourcePorts.length"><div>{{vservers.getDescSourceBusyPorts() | translate}}: <span class="selectedInfo">{{vservers.showUseSourcePorts()}}</span></div><div>{{'vservers_cant_use_ports' | translate}}</div></div></div></div></div><div class="card-action" ng-if="vservers.isActivate"><button type="button" ng-if="vservers.action == 'edit'" ng-click="vservers.remove()" ng-bind="'act_delete' | translate"></button> <button type="submit" class="colored" ng-disabled="vservers.action == 'edit' && !vservers.wasModified()" ng-bind="'act_apply' | translate"></button></div></form></div>