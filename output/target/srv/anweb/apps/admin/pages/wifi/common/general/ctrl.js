"use strict";!function(){angular.module("app").controller("WifiCommonGeneral",["$scope","translate","ngDialog",function($scope,translate,ngDialog){var device=$scope.device,helper=device.wifi.helper;$scope.wifi.general={data:null,supportedParam:function(param){var band,channels;return"HighChannelEnable"==param?device.wifi.supportedParam(param)&&$scope.wifi.general.data.HighChannelsAvailable?(band=$scope.wifi.general.data.OperatingFrequencyBand,channels=$scope.wifi.general.data.PossibleChannels,_.some(channels,function(channel){return"2.4GHz"==band?channel>11:channel>=100})):!1:"startChannelReselect"==param?!1:device.wifi.supportedParam(param)},supportedStandards:function(){if(!$scope.wifi.general.data)return{};var result=helper.supportedStandards($scope.wifi.general.data.SupportedStandards);return _.each(result,function(val,key){/mixed/.test(val)&&(result[key]=val.replace("mixed",translate("wifi_mixed")))}),result},getPossibleCountries:function(){return device.wifi.countries()},selectWifiChannel:function(band){var dlg=ngDialog.open({template:"dialogs/wifi_channel_select/dialog.tpl.html",className:"wifi_wmm_edit_dialog",controller:"WifiChannelSelectCtrl",data:{currentChannel:$scope.wifi.general.data.Channel,band:band}});dlg.closePromise.then(function(data){data.value&&data.value.selected&&($scope.wifi.general.data.Channel=data.value.channel)})},disabledClickListChannel:function(){return!($scope.wifi.general.data.AutoChannelEnable||$scope.wifi.general.data.SMSlaveClientEnable||$scope.SMSlaveClientEnable)&&$scope.wifi.general.selectWifiChannel($scope.wifi.band.state)},getAutoChannelComment:function(){return translate("wifi_auto")+" ("+translate("wifi_channel").toLowerCase()+" "+($scope.wifi.CurrentChannel?$scope.wifi.CurrentChannel:$scope.wifi.general.data.Channel)+")"},getWifiHighChannelsComment:function(){return"5GHz"==$scope.wifi.band.state?"wifi_channel_high_comment":"wifi_channel_high_comment_24"},getWifiHighChannelsOffComment:function(){return"5GHz"==$scope.wifi.band.state?"wifi_channel_high_off_comment":"wifi_channel_high_off_comment_24"},invalidStandard:function(){var band=$scope.wifi.general.data.OperatingChannelBandwidth;if(!$scope.wifi.general.data.CheckStandard||"Auto"==band)return!1;switch($scope.wifi.general.data.OperatingStandards){case"a":case"b":case"g":case"bg":return"20MHz"!=band;case"n":case"an":return"20MHz"!=band&&"40MHz"!=band;default:return!1}},getChannelInfo:function(){switch($scope.wifi.general.data.OperatingStandards){case"a":return"wifi_cur_bw_info_80211_a_20";case"b":case"g":case"bg":return"wifi_cur_bw_info_80211_n_40";case"n":case"an":return"wifi_cur_bw_info_80211_ac_80_160"}},writeSupported:function(param){return device.wifi.writeSupported(param)}},$scope.schedule={active:!1},$scope.isClientMode=device.wifi.isClientMode(),$scope.$watch(function(){return device.wifi.getBandFreq()},function(newBand,oldBand){var band;!newBand||$scope.wifi.general.data&&_.isEqual(newBand,oldBand)||(band=device.wifi.getBand(0),$scope.wifi.general.data=band.radio,$scope.wifi.general.initData=angular.copy($scope.wifi.general.data),$scope.wifi.general.data.CheckStandard&&($scope.disabledStandarts="2.4GHz"==band.radio.OperatingFrequencyBand?"802.11 n":"802.11 ac/n"))})}])}();