"use strict";!function(){angular.module("app").controller("WifiAPForm",["$scope","navigationFilter","$state","device","wifiCommonShared",function($scope,navigationFilter,$state,device,shared){function isFormInvalid(){return $scope.form.$invalid}var rules=navigationFilter.rules(),action=$state.current.name.split(".").pop(),freq=$state.params.freq,inx=$state.params.inx;$scope.wifi={isActivate:!1,isWDSInBridgeMode:!1,apply:function(){isFormInvalid()||shared.apply({action:"ap",freq:freq})},wasModified:function(){return $scope.wifi.isActivate&&$scope.wifi.ap&&$scope.wifi.ap.isChange()},isAdd:function(){return"add"===action}},function(){$scope.loading=!0,shared.activate().then(function(){$scope.loading=!1,device.wifi.setBandFreq(freq),$scope.wifi.isActivate=!0;var wds=device.wifi.getWDSData();$scope.wifi.isWDSInBridgeMode=wds&&"Bridge"==wds.Mode,$scope.customRules=_.isFunction(rules.GetRulesForSSID)?rules.GetRulesForSSID(inx,$scope.wifi.ap):rules,$scope.$emit("pageload")})}()}])}();