"use strict";!function(){angular.module("app").service("wifiWpsShared",["$rootScope","$q","$state","$timeout","device",function($rootScope,$q,$state,$timeout,device){return{activate:function(){var deferred=$q.defer();return device.wifi.pullAdv(function(){deferred.resolve()}),deferred.promise},apply:function(action,freq){function successCb(){var pageWifiWpsPath=_.initial($state.current.name.split("."),2).join(".")+".wps";action&&"wps"==action?$state.go(pageWifiWpsPath,{freq:freq}):$state.go($state.current,{},{reload:!0})}function errorCb(){$state.go("error",{code:"msg_push_error",message:"msg_error_desc"})}var overlay=$rootScope.overlay.circular,overlayId=overlay.start();device.wifi.push(function(error){error?errorCb():successCb()})["finally"](overlay.stop.bind(overlay,overlayId))}}}])}();