"use strict";!function(){angular.module("app").controller("lanDhcpOptionsCtrl",["$scope","$state","ngDialog","lanHelper","dhcpCustomOpts",function($scope,$state,ngDialog,helper,dhcpCustomOpts){function update(){var iface=lan["interface"].getCurrent();iface&&$scope.DHCPOption.update(iface.ipv4.dhcp.DHCPOption)}var lan=$scope.device.lan,supported=$scope.ipv4&&$scope.ipv4.isActive&&"Server"==$scope.ipv4.data.DHCP.Mode;$scope.DHCPOption={supported:supported,list:[],isEmpty:function(){return this.list&&0==this.list.length},reset:function(){this.list=this.util.list()},update:function(util){this.util=util,this.mode=util.mode(),this.reset()},addRule:function(){this.dialog({action:"add"})},editRule:function(item,instance){this.dialog({action:"edit",data:item,instance:instance})},deleteRule:function(items,instances){this.util.remove(instances),this.list=this.util.list()},getOptionName:function(tag){var elem=_.find(dhcpCustomOpts,function(item){return item.tag==tag});return elem?elem.option:""},dialog:function(options){var self=this;(function(options){return ngDialog.open({template:"dialogs/dhcp_options/dialog.tpl.html",controller:"DHCPOptionsDialogCtrl",scope:$scope,data:options})})(options).closePromise.then(function(dialogData){var util=self.util,result=dialogData.value;if(util.list(),!_.isNull(result)){switch(result.action){case"add":util.add(result.data);break;case"edit":util.set(result.data,result.instance);break;case"remove":util.remove(result.instance)}self.reset()}})}},update(),$scope.$on("lan.update",update),$scope.$on("lan.interface.update",update)}])}();