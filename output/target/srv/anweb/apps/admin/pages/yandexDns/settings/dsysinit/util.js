"use strict";!function(){angular.module("app").service("yandexDnsSettingsUtil",["cpe","funcs","device",function(cpe,funcs,device){function getConfig(){return config?config:{}}function getAvailableModes(){return availableModes}function push(settings){var input=converter.nativeToDsysinit.settings(settings),init=converter.nativeToDsysinit.settings(__initConfig),diff=funcs.newConfig.makeDiff(init,input,attrs);if(_.isEmpty(diff))return Promise.resolve();var data={};return funcs.setValue(path.slice(0,-1),diff,data),cpe.ApplyDifference(data)}var config=null,attrs=null,availableModes=null,path="Device.Network.Server.DNS.",__initConfig=null,converter=device.yandexDns.converter;return{pull:function(){function success(response){var data=funcs.buildTree(response[0].result.ParameterList);return attrs=funcs.buildTreeAttributes(response[1].result.ParameterList),config=converter.dsysinitToNative.settings(data),availableModes=converter.attrsToNative.settings(attrs),__initConfig=funcs.deepClone(config),Promise.resolve()}return Promise.all([cpe.GetParameterValues([path]),cpe.GetParameterAttributes([path])]).then(success)},push:push,getConfig:getConfig,getAvailableModes:getAvailableModes}}])}();