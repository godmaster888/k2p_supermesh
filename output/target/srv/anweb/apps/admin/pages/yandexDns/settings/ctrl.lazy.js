"use strict";!function(){function yandexDnsSettingsController($scope,device,util,$state){function activate(){$scope.ydSettings=util.getConfig(),$scope.ydModesAvailable=util.getAvailableModes(),_yandexSettingsInitial=angular.copy($scope.ydSettings),$scope.$emit("pageload")}function init(){util.pull().then(activate)}$scope.ydSettings={};var _yandexSettingsInitial=null;$scope.save=function(){function error(){$state.go("error",{code:"pushError",message:"pushErrorDesc"})}var overlay=$scope.overlay.circular,overlayId=overlay.start();util.push($scope.ydSettings).then(init)["catch"](error)["finally"](overlay.stop.bind(overlay,overlayId))},$scope.saveEnabled=function(){return _yandexSettingsInitial&&!_.isEqual(_yandexSettingsInitial,$scope.ydSettings)},device.safeDns&&_.isFunction(device.safeDns.pullEnabled)&&device.safeDns.pullEnabled().then(function(enabled){enabled?($scope.ydSafeDNSWarning=!0,$scope.$emit("pageload")):init()})}angular.module("app").controllerProvider.register("yandexDnsSettingsController",yandexDnsSettingsController),yandexDnsSettingsController.$inject=["$scope","device","yandexDnsSettingsUtil","$state"]}();