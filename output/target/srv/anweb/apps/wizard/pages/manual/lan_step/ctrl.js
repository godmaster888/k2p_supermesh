"use strict";function LANStepController($scope,$rootScope,manualProfile,manualStepApiDispatcher,translate,device){function isDynamic(){return"Dynamic"==profile.$LANStep.IPv4.AdressingType}var is=device.funcs.is,profile=manualProfile.profile(),IPv4Static=profile.$LANStep.IPv4.StaticIP[1],IPv4DHCP=profile.$LANStep.IPv4.DHCP,localDomain=profile.$LANStep.LocalDomain;$scope.lanStep={profile:profile,IPv4Static:IPv4Static,IPv4DHCP:IPv4DHCP,useDynamic:isDynamic(),isDynamic:isDynamic,updateIPv4NetworkRange:function(){if(is.ipv4(IPv4Static.Address)&&is.ipv4(IPv4Static.SubnetMask)){var ranges,count1,count2,range=device.funcs.ipv4.subnet.getNetworkRange(IPv4Static.Address,IPv4Static.SubnetMask),defRange={start:IPv4Static._DefaultStartIP,end:IPv4Static._DefaultEndIP};defRange.start&&defRange.end&&!device.funcs.ipv4.subnet.belongNetworkRange(defRange,IPv4Static.Address)&&device.funcs.ipv4.subnet.belongNetworkRange(range,defRange.start)&&device.funcs.ipv4.subnet.belongNetworkRange(range,defRange.end)?(IPv4DHCP.Server.MinAddress=null,IPv4DHCP.Server.MaxAddress=null):(ranges=device.funcs.ipv4.subnet.splitNetworkRange(range,IPv4Static.Address),ranges.length>1?(count1=parseInt(ranges[0].end.split(".")[3])-parseInt(ranges[0].start.split(".")[3]),count2=parseInt(ranges[1].end.split(".")[3])-parseInt(ranges[1].start.split(".")[3]),count1>count2?(IPv4DHCP.Server.MinAddress=ranges[0].start,IPv4DHCP.Server.MaxAddress=ranges[0].end):(IPv4DHCP.Server.MinAddress=ranges[1].start,IPv4DHCP.Server.MaxAddress=ranges[1].end)):(IPv4DHCP.Server.MinAddress=ranges[0].start,IPv4DHCP.Server.MaxAddress=ranges[0].end))}},useDynamicChange:function(){manualProfile.setLANMode($scope.lanStep.useDynamic)},localDomain:localDomain},manualStepApiDispatcher.get().registerStepApi({name:"LANStep",onActivate:function(){$scope.lanStep.useDynamic=isDynamic()}})}angular.module("wizard").controller("LANStepController",LANStepController),LANStepController.$inject=["$scope","$rootScope","manualProfile","manualStepApiDispatcher","translate","device"];