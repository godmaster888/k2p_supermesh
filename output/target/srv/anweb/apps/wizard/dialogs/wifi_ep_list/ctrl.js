"use strict";!function(){angular.module("wizard").controller("WiFiEndPointListDialogCtrl",["$scope","$state","$q","translate","ngDialog","devinfo","$timeout","wifiScan",function($scope,$state,$q,translate,ngDialog,devinfo,$timeout,wifiScan){function getShortSecurity(item){var mode=item.ModeEnabled;return translate("None"==mode?"wifi_client_open_net":"wifi_client_protected_net")+", "}function sortByBandAndSignal(list){var result=[],band24=_.filter(list,function(elem){return"2.4GHz"==elem.Band}),band5=_.filter(list,function(elem){return"5GHz"==elem.Band});return(band24||band5)&&(result=_.union(_.sortBy(band24,function(l){return-l.SignalStrength}),_.sortBy(band5,function(l){return-l.SignalStrength}))),result}var data=$scope.ngDialogData,scanInit=!1,scanInProcess=!1;$scope.getSSID=function(item){return _.isEmpty(item.SSID)?"< HIDDEN >":" "+item.SSID},$scope.getImgSignal=function(item){var signal=item.SignalStrength,security=item.ModeEnabled,value=parseInt(signal/20);return value||(value="0"),5==value&&(value=4),"None"!=security?value?"wifi_lock_"+value:"":value?"wifi_"+value:""},$scope.getSecurity=function(elem){var result="",mode=elem.ModeEnabled,encr=elem.EncryptionType;switch(mode){case"None":case"WEP":result+="Open";break;case"WPA-Enterprise":result+="WPA";break;case"WPA2-Enterprise":result+="WPA2";break;case"WPA-WPA2-Enterprise":result+="WPA/WPA2 mixed";break;case"WPA-Personal":result+="WPA-PSK";break;case"WPA2-Personal":result+="WPA2-PSK";break;case"WPA-WPA2-Personal":result+="WPA-PSK/WPA2-PSK mixed";break;case"WPA3":result+="WPA3-SAE";break;case"WPA2-WPA3":result+="WPA2-PSK/WPA3-SAE mixed";break;default:result+="UNKNOWN"}return encr&&"NONE"!=encr&&(result+=" ["+("TKIPAES"==encr?"TKIP+AES":encr)+"]"),result},$scope.showClientBand=function(){return!$scope.isSeparateClient},$scope.getFreq=function(band){return"2.4GHz"==band?translate("24ghz"):"5GHz"==band?translate("5ghz"):""},$scope.getCaption=function(item){return item.SSID},$scope.getShort=function(item){return getShortSecurity(item)+$scope.getFreq(item.Band)},$scope.selectEndpoint=function(index){$scope.closeThisDialog({index:index,ep:$scope.scanList[index]})},$scope.update=function(){scanInProcess||(scanInProcess=!0,wifiScan.pullScan().then(function(points){var tmpList=_.filter(_.sortBy(points,function(o){return!$scope.checkSelected(o)}),function(o){return!data.band||data.band==o.Band});$scope.scanList=sortByBandAndSignal(tmpList)})["finally"](function(){scanInit=!0,scanInProcess=!1}))},$scope.isLoadingList=function(){return!scanInit},$scope.isProcess=function(){return scanInit&&scanInProcess},$scope.checkSelected=function(item){return data&&data.checkSelected?data.checkSelected(item):!1},$scope.update()}])}();